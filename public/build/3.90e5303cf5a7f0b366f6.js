(this.webpackJsonp=this.webpackJsonp||[]).push([[3],{1907:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(15)),o=_(a(4)),r=_(a(7)),l=_(a(3)),u=_(a(5)),i=_(a(0)),d=_(a(28)),s=a(148),c=a(113),f=_(a(108)),p=a(97),m=a(53),h=a(67),g=a(330),v=_(a(181)),b=_(a(846)),w=_(a(413)),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(438));function _(e){return e&&e.__esModule?e:{default:e}}var k=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return(0,f.default)(a),a.state={loading:!1},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){(0,s.getQueryString)("code")||(window.location.href="/register")}},{key:"login",value:function(e){var t=this,a=e.email,n=e.password;(0,g.postLogin)({username:a,password:n}).then(function(e){return 200!==e.status?t.props.actions.loginFailed(e.data):((0,v.default)("You have been logged in."),window.location.href="/app",t.props.actions.loginSuccess({user:{email:a,password:n},token:e.data.token}))},function(e){return t.props.actions.loginFailed(e.response.data.message)}).finally(function(){t.setState({loading:!1})})}},{key:"handleSubmit",value:function(e){var t=this.props.match.params.service;return(0,g.postAuthCallback)({service:t,payload:{password:e.password},params:{code:(0,s.getQueryString)("code")}}).then(function(){(0,v.default)("You have been logged in."),window.location.href="/app"}).catch(function(e){var t=e.response;(0,v.default)(t.data.message||"An error occurred.","error")})}},{key:"render",value:function(){return i.default.createElement(h.Grid,{centered:!0,padded:!0,className:"login-screen"},i.default.createElement(h.Grid.Column,{mobile:16,tablet:10,computer:6},i.default.createElement(h.Card,{fluid:!0,className:"card mt-4"},i.default.createElement(h.Card.Content,null,i.default.createElement(w.default,null)),i.default.createElement(h.Card.Content,null,i.default.createElement(b.default,{handleSubmit:this.handleSubmit,loading:this.state.loading})))))}}]),t}(i.default.Component);k.propTypes={actions:d.default.object.isRequired,match:d.default.object.isRequired};t.default=(0,m.withRouter)((0,c.connect)(null,function(e){return{actions:(0,p.bindActionCreators)(y,e)}})(k)),e.exports=t.default}}]);