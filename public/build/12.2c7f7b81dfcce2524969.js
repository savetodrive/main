(this.webpackJsonp=this.webpackJsonp||[]).push([[12],{1873:function(e,t){},1874:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(47)),r=u(a(0)),l=a(28),i=u(a(109));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.plan,a=e.onSelect,l=e.selected,u=void 0===l?null:l;return r.default.createElement("div",{className:"pricing-table"},r.default.createElement("h3",{className:"pricing-title"},(0,i.default)(t.name)),r.default.createElement("div",{className:"price"},"$",t.price,r.default.createElement("sup",null,"/ month")),r.default.createElement("ul",{className:"table-list"},t.description.map(function(e,t){return r.default.createElement("li",{key:t},r.default.createElement(n.default,{type:"check",color:"#3fab91"}),e)})),r.default.createElement("div",{className:"table-buy"},r.default.createElement("button",{onClick:a(t),className:"pricing-action"},u&&u===t._id&&r.default.createElement(n.default,{type:"check"})," Subscribe")))};s.propTypes={plan:l.PropTypes.object.isRequired,onSelect:l.PropTypes.func.isRequired,selected:l.PropTypes.string.isRequired},t.default=s,e.exports=t.default},1903:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(229)),r=S(a(180)),l=S(a(128)),i=S(a(149)),u=S(a(280)),s=S(a(13)),o=S(a(15)),c=S(a(4)),d=S(a(7)),p=S(a(3)),f=S(a(5)),m=S(a(28)),h=S(a(0)),y=a(53),v=S(a(858)),g=a(113),k=S(a(108)),_=a(97),b=a(283),E=S(a(1874)),P=a(127),w=a(148);function S(e){return e&&e.__esModule?e:{default:e}}a(1873);var N=function(e){function t(e){var a;(0,c.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return(0,k.default)(n),n.secureData=null,n.state=(a={loading:!0,current:0,loadingTip:"Please wait...",paymentContainer:"paymentContainer",clientToken:null},(0,s.default)(a,"loading",!0),(0,s.default)(a,"plan",null),a),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.user){var t=e.user;if(t&&t.subscription.ends_at&&!(0,v.default)(t.subscription.ends_at))return window.location.href="/app"}}},{key:"fetchFastspringSecurePayload",value:function(){return(0,P.getFastspringSecurePayload)().catch(function(){u.default.error("Unable to fetch secure data.")})}},{key:"verifyOrder",value:function(e){(0,P.getVerifyOrderId)(e.id).then(function(){window.location.href="/app"}).catch(function(){u.default.error("We are unable to verify order, please contact our support <support@savetodrive.net>")})}},{key:"componentDidMount",value:function(){var e=this,a=this;return window.onstdpaymentclosed||(window.onstdpaymentclosed=function(e){e&&(a.setState({loading:!0,loadingTip:"Please wait! We are processing your account, it will take sometime..."}),clearTimeout(window.onstdpaymentclosedTimeout),window.onstdpaymentclosedTimeout=setTimeout(function(){a.verifyOrder(e)},2e4))}),this.loading(!0),this.fetchFastspringSecurePayload().then(function(a){e.secureData=a.data,t.IS_INJECTED||((0,w.injectFastSpringScript)(e.secureData),t.IS_INJECTED=!0),e.props.plans.length?e.loading(!1):e.props.actions.fetchPlan().finally(function(){e.loading(!1)})}),!0}},{key:"loading",value:function(e){this.setState({loading:e})}},{key:"initPaymentContainer",value:function(){this.loading(!1)}},{key:"getSteps",value:function(){return[{title:"Choose Plan",content:this.renderPlans()}]}},{key:"next",value:function(){var e=this.props.user;if(!this.secureData)return u.default.error("Unable to init payment box, please reload and try again.");if(this.state.plan){var t={reset:!0,paymentContact:{firstName:e.first_name,lastName:e.last_name,email:e.email,phoneNumber:" "},firstname:"samundra",products:[{path:this.state.plan.provider_plan_code,quantity:1}],contact:{firstName:e.first_name,lastName:e.last_name,email:e.email},accountCustomKey:e._id,account:e.subscription.customer_id,checkout:!0};return window.fastspring?(fastspring.builder.push(t),!0):alert("Some problem occured, please reload this page and try again")}}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"handlePlanSelect",value:function(e){var t=this;return function(){if(!t.state.plan||e._id!==t.state.plan._id)return t.setState({plan:e})}}},{key:"handlePayment",value:function(){if(!this.instance)return u.default.error("Unable to proceed payment.","error"),!1;this.loading(!0)}},{key:"renderPlans",value:function(){var e=this;return h.default.createElement(l.default,{gutter:16},this.props.plans.map(function(t){return h.default.createElement(i.default,{span:6,key:t._id},h.default.createElement(E.default,{key:t._id,plan:t,onSelect:e.handlePlanSelect,selected:e.state.plan?e.state.plan._id:"none"}))}))}},{key:"render",value:function(){var e=this,t=this.getSteps();return h.default.createElement("div",null,h.default.createElement(n.default,{spinning:this.state.loading,tip:this.state.loadingTip},h.default.createElement("div",{className:"steps-content"},t.map(function(t,a){return h.default.createElement("div",{key:t.title,style:{display:a===e.state.current?"block":"none"}},t.content)})),h.default.createElement("hr",null),h.default.createElement("div",{className:"steps-action"},this.state.current<t.length-1&&h.default.createElement(r.default,{type:"primary",onClick:this.next},"Next"),this.state.current===t.length-1&&h.default.createElement(r.default,{size:"large",type:"primary",onClick:this.next},"Checkout"),this.state.current>0&&h.default.createElement(r.default,{style:{marginLeft:8},onClick:this.prev},"Previous"))))}},{key:"setInstance",value:function(e){this.instance=e}}]),t}(h.default.Component);N.propTypes={user:m.default.object.isRequired,actions:m.default.object.isRequired,plans:m.default.array.isRequired};t.default=(0,y.withRouter)((0,g.connect)(function(e){return{user:e.app.user,plans:e.app.plans}},function(e){return{actions:(0,_.bindActionCreators)({fetchPlan:b.fetchPlan},e)}})(N)),e.exports=t.default}}]);